{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import{useHistory,useNavigate}from\"react-router-dom\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var navigate=useNavigate();var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var username,password,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();username=formData.username,password=formData.password;_context.prev=2;console.log(username,password);_context.next=6;return axios.post(\"http://localhost:8000/api/loginpost/\",formData);case 6:response=_context.sent;if(response.status===201&&response.data.sid!==undefined){localStorage.setItem(\"usernameToken\",username);localStorage.setItem(\"sidToken\",response.data.sid);navigate(\"/dashboard\",{state:response.data});}else{console.log(\"status failed\");}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(\"post failed\");case 13:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})})]})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","useHistory","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_useState","username","password","_useState2","_slicedToArray","formData","setFormData","navigate","handleInputChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","preventDefault","console","log","post","sent","status","data","sid","undefined","localStorage","setItem","state","t0","stop","_x","apply","arguments","className","children","onSubmit","type","onChange"],"sources":["/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/src/components/Auth/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, useNavigate } from \"react-router-dom\";\nimport \"./Login.css\";\n\nfunction Login() {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  const navigate = useNavigate();\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { username, password } = formData;\n    try {\n      console.log(username, password);\n      const response = await axios.post(\n        `http://localhost:8000/api/loginpost/`,\n        formData\n      );\n      if (response.status === 201 && response.data.sid !== undefined) {\n        localStorage.setItem(\"usernameToken\", username);\n        localStorage.setItem(\"sidToken\", response.data.sid);\n        navigate(\"/dashboard\", { state: response.data });\n      } else {\n        console.log(\"status failed\");\n      }\n    } catch (error) {\n      console.log(\"post failed\");\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit} className=\"login-form\">\n        <div>\n          <label>Username:</label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={formData.username}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">Login</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}