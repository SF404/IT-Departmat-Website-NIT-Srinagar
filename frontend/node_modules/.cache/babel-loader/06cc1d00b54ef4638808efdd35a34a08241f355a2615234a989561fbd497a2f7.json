{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import{useHistory,useNavigate}from\"react-router-dom\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({username:\"\",password:\"\",isLoggedIn:false,error:\"\",teacherData:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var navigate=useNavigate();var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var username,password,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();username=state.username,password=state.password;_context.prev=2;_context.next=5;return axios.post(\"http://localhost:8000/api/login/\",{username:username,password:password});case 5:response=_context.sent;if(response.status===200&&response.data.message===\"Login successful\"){navigate(\"/dashboard\",{state:{sessionData:response.data}});}else{setState(_objectSpread(_objectSpread({},state),{},{error:\"Login failed\"}));}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setState(_objectSpread(_objectSpread({},state),{},{error:\"Login failed\"}));case 12:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:state.username,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:state.password,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})})]})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","useHistory","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_useState","username","password","isLoggedIn","error","teacherData","_useState2","_slicedToArray","state","setState","navigate","handleInputChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","status","data","message","sessionData","t0","stop","_x","apply","arguments","className","children","onSubmit","type","onChange"],"sources":["/Users/rajesmanna/Documents/Web Project/IT-Departmat-Website-NIT-Srinagar/frontend/src/components/Auth/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, useNavigate } from \"react-router-dom\";\nimport \"./Login.css\";\n\nfunction Login() {\n  const [state, setState] = useState({\n    username: \"\",\n    password: \"\",\n    isLoggedIn: false,\n    error: \"\",\n    teacherData: null,\n  });\n\n  const navigate = useNavigate();\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setState({ ...state, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { username, password } = state;\n    try {\n      const response = await axios.post(\"http://localhost:8000/api/login/\", {\n        username: username,\n        password: password,\n      });\n      if (\n        response.status === 200 &&\n        response.data.message === \"Login successful\"\n      ) {\n        navigate(\"/dashboard\", { state: { sessionData: response.data } });\n      } else {\n        setState({ ...state, error: \"Login failed\" });\n      }\n    } catch (error) {\n      setState({ ...state, error: \"Login failed\" });\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit} className=\"login-form\">\n        <div>\n          <label>Username:</label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={state.username}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={state.password}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">Login</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}